# 测试清单

使用此清单确保所有功能正常工作。

## 环境准备

- [ ] Node.js 和 npm 已安装
- [ ] Chrome 浏览器版本 >= 114
- [ ] Firebase 项目已创建并配置
- [ ] `.env` 文件已创建并包含正确的配置
- [ ] 项目已构建 (`npm run build`)
- [ ] 扩展已在 Chrome 中加载

## 功能测试

### 1. 认证功能

#### 1.1 Google 登录
- [ ] 点击"使用 Google 账号登录"按钮
- [ ] Google 登录弹窗正常显示
- [ ] 选择账号后成功登录
- [ ] 用户信息（头像、名称、邮箱）正确显示在顶部
- [ ] 刷新页面后登录状态保持

#### 1.2 登出
- [ ] 点击登出按钮
- [ ] 成功登出并返回登录页面
- [ ] 刷新页面后保持登出状态

### 2. 内容管理

#### 2.1 创建内容 - 代码类型
- [ ] 点击"新建"按钮，编辑器对话框打开
- [ ] 输入标题："测试 JavaScript 代码"
- [ ] 选择类型："代码"
- [ ] 选择语言："JavaScript"
- [ ] 输入代码：
  ```javascript
  function greet(name) {
    return `Hello, ${name}!`;
  }
  ```
- [ ] 点击"保存"
- [ ] 新内容出现在列表顶部
- [ ] 代码显示正确的语法高亮
- [ ] 显示正确的创建时间

#### 2.2 创建内容 - SQL 类型
- [ ] 点击"新建"按钮
- [ ] 输入标题："查询用户数据"
- [ ] 选择类型："SQL"
- [ ] 输入 SQL：
  ```sql
  SELECT * FROM users 
  WHERE created_at > '2024-01-01' 
  ORDER BY id DESC;
  ```
- [ ] 点击"保存"
- [ ] 新内容出现在列表中
- [ ] SQL 语句显示正确的语法高亮

#### 2.3 创建内容 - 文本类型
- [ ] 点击"新建"按钮
- [ ] 输入标题："项目笔记"
- [ ] 选择类型："文本"
- [ ] 输入文本：
  ```
  这是一个测试笔记
  - 第一项
  - 第二项
  ```
- [ ] 点击"保存"
- [ ] 新内容出现在列表中
- [ ] 文本正确显示（无语法高亮）

#### 2.4 编辑内容
- [ ] 点击任意内容的编辑图标
- [ ] 编辑器打开并显示现有内容
- [ ] 修改标题和内容
- [ ] 点击"保存"
- [ ] 内容成功更新
- [ ] 更新后的内容正确显示

#### 2.5 删除内容
- [ ] 点击任意内容的删除图标
- [ ] 显示确认对话框
- [ ] 点击"确定"
- [ ] 内容从列表中移除
- [ ] 刷新页面后，删除的内容不再出现

### 3. 搜索功能

#### 3.1 基础搜索
- [ ] 在搜索框输入关键词（如"测试"）
- [ ] 等待 300ms 防抖
- [ ] 只显示匹配的内容
- [ ] 清空搜索框，所有内容重新显示

#### 3.2 搜索标题
- [ ] 输入标题中的关键词
- [ ] 正确筛选出包含该关键词的内容

#### 3.3 搜索内容
- [ ] 输入内容中的关键词
- [ ] 正确筛选出包含该关键词的内容

#### 3.4 大小写不敏感
- [ ] 输入小写关键词
- [ ] 匹配到标题/内容中的大写关键词

#### 3.5 无结果
- [ ] 输入不存在的关键词
- [ ] 显示空状态
- [ ] 提示信息友好

### 4. 筛选功能

#### 4.1 全部
- [ ] 点击"全部"标签
- [ ] 显示所有类型的内容
- [ ] 标签样式正确高亮

#### 4.2 代码
- [ ] 点击"代码"标签
- [ ] 只显示类型为"代码"的内容
- [ ] 标签样式正确高亮

#### 4.3 SQL
- [ ] 点击"SQL"标签
- [ ] 只显示类型为"SQL"的内容
- [ ] 标签样式正确高亮

#### 4.4 文本
- [ ] 点击"文本"标签
- [ ] 只显示类型为"文本"的内容
- [ ] 标签样式正确高亮

#### 4.5 组合使用
- [ ] 先选择"代码"筛选
- [ ] 再在搜索框输入关键词
- [ ] 只显示符合两个条件的内容

### 5. Monaco Editor

#### 5.1 编辑器加载
- [ ] 打开编辑器，Monaco Editor 正常加载
- [ ] 编辑器主题为深色 (vs-dark)
- [ ] 行号正确显示
- [ ] 语法高亮正常工作

#### 5.2 语言支持
测试以下语言的语法高亮：
- [ ] JavaScript
- [ ] TypeScript
- [ ] Python
- [ ] Java
- [ ] SQL
- [ ] HTML
- [ ] CSS
- [ ] JSON

#### 5.3 编辑器功能
- [ ] 代码自动补全工作正常
- [ ] 支持多行编辑
- [ ] 支持代码折叠
- [ ] 撤销/重做功能正常
- [ ] 复制/粘贴功能正常

### 6. 语法高亮 (Prism.js)

#### 6.1 代码预览
- [ ] 列表中的代码片段显示正确的语法高亮
- [ ] 深色主题样式正确
- [ ] 长代码正确截断并显示省略号

#### 6.2 多种语言
- [ ] JavaScript 高亮正确
- [ ] Python 高亮正确
- [ ] SQL 高亮正确
- [ ] 其他支持的语言高亮正确

### 7. UI/UX

#### 7.1 响应式设计
- [ ] Side Panel 宽度合适（400-500px）
- [ ] 内容区域可正常滚动
- [ ] 长标题/内容正确处理（截断或换行）

#### 7.2 加载状态
- [ ] 初始加载时显示"加载中..."
- [ ] 保存时按钮显示"保存中..."
- [ ] 删除操作有视觉反馈

#### 7.3 错误处理
- [ ] 标题为空时提示"请输入标题"
- [ ] 内容为空时提示"请输入内容"
- [ ] 网络错误时显示友好提示
- [ ] Firebase 错误时不会崩溃

#### 7.4 空状态
- [ ] 无内容时显示友好的空状态提示
- [ ] 搜索无结果时显示提示
- [ ] 提示文案清晰易懂

#### 7.5 按钮和交互
- [ ] 所有按钮有 hover 效果
- [ ] 点击反馈流畅
- [ ] 图标清晰可辨识
- [ ] 颜色对比度足够

### 8. 数据持久化

#### 8.1 Firestore 存储
- [ ] 登录后创建的内容保存到 Firestore
- [ ] 在 Firebase 控制台能看到数据
- [ ] 数据结构正确（包含所有必需字段）
- [ ] userId 正确关联

#### 8.2 数据同步
- [ ] 在不同标签页中打开扩展，数据一致
- [ ] 刷新页面后数据保持
- [ ] 登出再登录，数据仍然存在

#### 8.3 Chrome Storage (未来功能)
- [ ] 匿名用户数据保存到本地
- [ ] 登录时自动迁移本地数据到 Firestore

### 9. 性能测试

#### 9.1 加载性能
- [ ] 初始加载时间 < 2 秒
- [ ] Side Panel 打开速度 < 500ms
- [ ] 编辑器打开速度 < 1 秒

#### 9.2 大数据量
创建 50+ 个内容项：
- [ ] 列表滚动流畅
- [ ] 搜索仍然快速响应
- [ ] 内存占用合理

#### 9.3 网络
- [ ] 弱网环境下有适当的加载提示
- [ ] 离线时显示友好错误信息

### 10. 安全性

#### 10.1 Firestore 规则
- [ ] 只能读取自己的内容
- [ ] 无法读取其他用户的内容
- [ ] 无法修改其他用户的内容
- [ ] 创建内容时 userId 必须是自己

#### 10.2 认证
- [ ] 未登录时无法访问主界面
- [ ] Token 过期后自动跳转登录页
- [ ] 登出后清除本地状态

### 11. 浏览器兼容性

#### 11.1 Chrome 版本
- [ ] Chrome 114+ 正常工作
- [ ] Side Panel API 可用

#### 11.2 其他 Chromium 浏览器
- [ ] Microsoft Edge 测试（可选）
- [ ] Brave 浏览器测试（可选）

### 12. 边界情况

#### 12.1 长内容
- [ ] 超长标题正确处理
- [ ] 超长代码正确显示
- [ ] 超大文件（100KB+）能正常保存

#### 12.2 特殊字符
- [ ] 标题包含特殊字符（emoji、中文、符号）
- [ ] 代码包含特殊字符
- [ ] SQL 包含注释和特殊语法

#### 12.3 并发操作
- [ ] 快速连续点击"新建"按钮
- [ ] 快速切换筛选标签
- [ ] 同时搜索和筛选

## 回归测试

在每次代码更新后，重新运行此清单中的关键测试用例。

## 测试报告

测试日期：____________________
测试人员：____________________
Chrome 版本：____________________
通过率：____________________

发现的问题：
1. ____________________
2. ____________________
3. ____________________

备注：
____________________
____________________
____________________
