# 登录功能说明

本应用支持多种登录方式，为用户提供灵活的选择。

## 🔐 支持的登录方式

### 1. 邮箱登录/注册

- ✅ 使用邮箱和密码进行注册
- ✅ 使用邮箱和密码进行登录
- ✅ 密码长度至少 6 位
- ✅ 自动登录（注册成功后）

**特点**：
- 无需第三方账号
- 数据完全在你的控制之下
- 支持密码重置（通过 Supabase）

### 2. GitHub 登录 ⭐

- ✅ 使用 GitHub 账号快速登录
- ✅ 无需创建新账号
- ✅ 自动获取 GitHub 用户信息

**优势**：
- 开发者友好
- 一键登录，无需记忆密码
- 使用 GitHub 的头像和用户名

**配置要求**：
- 需要在 Supabase 中配置 GitHub OAuth
- 参考 [GitHub 登录配置指南](./GITHUB_LOGIN_SETUP.md)

### 3. Google 登录（开发中）

- ⏳ Google OAuth 登录
- ⏳ 使用 Chrome Identity API

**状态**：代码已实现，等待配置

### 4. 本地模式（游客模式）

- ✅ 无需登录即可使用
- ✅ 数据保存在本地浏览器
- ✅ 支持所有核心功能

**限制**：
- 数据不会同步到云端
- 清除浏览器数据会丢失所有内容
- 无法在多设备间共享

## 📊 功能对比

| 功能 | 邮箱登录 | GitHub 登录 | 本地模式 |
|------|---------|------------|---------|
| 需要注册 | ✅ | ❌ | ❌ |
| 云端同步 | ✅ | ✅ | ❌ |
| 多设备访问 | ✅ | ✅ | ❌ |
| 数据安全性 | 高 | 高 | 中 |
| 设置难度 | 简单 | 简单 | 无 |
| 登录速度 | 快 | 极快 | 即时 |

## 🔄 在登录方式间切换

### 从本地模式切换到登录

1. 点击 Header 右上角的 "登录" 按钮
2. 选择登录方式（邮箱或 GitHub）
3. 完成登录后，可以选择：
   - 保留本地数据
   - 清空本地数据

### 从登录状态切换到本地模式

1. 点击 Header 的"登出"按钮
2. 系统会自动切换到本地模式
3. 之前的本地数据仍然可用

## 🛡️ 安全与隐私

### 数据存储

- **登录用户**：数据加密存储在 Supabase 云端
- **本地用户**：数据存储在浏览器的 Chrome Storage API

### 认证流程

1. **邮箱登录**：
   ```
   用户输入邮箱密码 → Supabase 验证 → 返回 JWT Token → 应用存储 Token
   ```

2. **GitHub 登录**：
   ```
   点击登录 → Chrome Identity API → GitHub 授权 → Supabase 创建会话 → 登录成功
   ```

### 隐私保护

- ✅ 不收集不必要的用户信息
- ✅ 使用 HTTPS 加密传输
- ✅ 符合 GDPR 规范
- ✅ 用户可随时删除账号

## 💡 最佳实践

### 推荐的登录方式

1. **个人开发者**：使用 GitHub 登录（最方便）
2. **团队使用**：使用邮箱登录（更灵活）
3. **快速试用**：使用本地模式（无需配置）

### 数据迁移建议

如果你在本地模式下创建了大量数据，建议：

1. 导出本地数据（通过浏览器开发者工具）
2. 注册账号并登录
3. 导入数据到云端

> ⚠️ 注意：目前导入/导出功能正在开发中

## 🚀 未来计划

- [ ] 支持 Google 登录
- [ ] 数据导入/导出功能
- [ ] 多账号切换
- [ ] 社交登录（Twitter, Microsoft, etc.）
- [ ] 双因素认证 (2FA)

## 📝 技术实现

### 使用的技术栈

- **认证服务**：Supabase Auth
- **OAuth 流程**：Chrome Identity API
- **本地存储**：Chrome Storage API
- **会话管理**：JWT Token
- **状态管理**：React Context API

### 代码架构

```
src/
├── services/
│   ├── supabase.ts          # Supabase 配置和 OAuth 方法
│   ├── chromeAuth.ts        # Chrome Identity API 封装
│   └── storage.ts           # 本地存储管理
├── hooks/
│   └── useAuth.ts           # 认证状态管理
└── components/
    └── Auth/
        └── AuthPanel.tsx    # 登录界面
```

## 🔗 相关文档

- [GitHub 登录配置指南](./GITHUB_LOGIN_SETUP.md)
- [数据统计功能](./STATISTICS.md)
- [变量功能测试](./VARIABLES_TEST.md)
